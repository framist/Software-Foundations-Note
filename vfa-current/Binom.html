<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="common/css/sf.css" rel="stylesheet" type="text/css"/>
<title>Binom: Binomial Queues</title>
</head>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/vfa.css" rel="stylesheet" type="text/css"/>

<body>

<div id="page">

<div id="header">
<a href='https://www.cis.upenn.edu/~bcpierce/sf/current/index.html'>
<img src='common/media/image/sf_logo_sm.png'></a>
</br><a href='index.html'>  <span class='booktitleinheader'>Volume 3: Verified Functional Algorithms</span><br></br>
<ul id='menu'>
   <a href='toc.html'><li class='section_name'>目录</li></a>
   <a href='coqindex.html'><li class='section_name'>索引</li></a>
   <a href='deps.html'><li class='section_name'>路线</li></a>
</ul>
</a></div>

<div id="main">

<h1 class="libtitle">Binom<span class="subtitle">Binomial Queues</span></h1>


<div class="doc">

<div class="paragraph"> </div>

 Implementation and correctness proof of fast mergeable priority queues
   using binomial queues.

<div class="paragraph"> </div>

  Operation <span class="inlinecode"><span class="id" type="var">empty</span></span> is constant time,  <span class="inlinecode"><span class="id" type="var">insert</span></span>, <span class="inlinecode"><span class="id" type="var">delete_max</span></span>, and <span class="inlinecode"><span class="id" type="var">merge</span></span>
  are logN time.  (Well, except that comparisons on <span class="inlinecode"><span class="id" type="var">nat</span></span> take linear time.
  Read the <a href="Extract.html"><span class="inlineref">Extract</span></a> chapter to see what can be done about that.) 
<div class="paragraph"> </div>

<a name="lab154"></a><h1 class="section">Required Reading</h1>

<div class="paragraph"> </div>

  Binomial Queues <a href="http://www.cs.princeton.edu/~appel/Binom.pdf"><span class="inlineref">http://www.cs.princeton.edu/~appel/Binom.pdf</span></a>
  by Andrew W. Appel, 2016.

<div class="paragraph"> </div>

  Binomial Queues <a href="http://www.cs.princeton.edu/~appel/BQ.pdf"><span class="inlineref">http://www.cs.princeton.edu/~appel/BQ.pdf</span></a>
  Section 9.7 of _Algorithms 3rd Edition in Java, Parts 1-4:
    Fundamentals, Data Structures, Sorting, and Searching_,
  by Robert Sedgewick.  Addison-Wesley, 2002.

<div class="paragraph"> </div>

<a name="lab155"></a><h1 class="section">The Program</h1>

</div>
<div class="code code-space">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/library/Coq.Strings.String.html#"><span class="id" type="library">Coq.Strings.String</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Perm.html#"><span class="id" type="library">Perm</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Priqueue.html#"><span class="id" type="library">Priqueue</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Module</span> <a name="BinomQueue"><span class="id" type="module">BinomQueue</span></a> &lt;: <a class="idref" href="Priqueue.html#PRIQUEUE"><span class="id" type="module">PRIQUEUE</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.key"><span class="id" type="definition">key</span></a> := <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Inductive</span> <a name="BinomQueue.tree"><span class="id" type="inductive">tree</span></a> : <span class="id" type="keyword">Type</span> :=<br/>
|  <a name="BinomQueue.Node"><span class="id" type="constructor">Node</span></a>: <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a> → <a class="idref" href="Binom.html#tree"><span class="id" type="inductive">tree</span></a> → <a class="idref" href="Binom.html#tree"><span class="id" type="inductive">tree</span></a> → <a class="idref" href="Binom.html#tree"><span class="id" type="inductive">tree</span></a><br/>
|  <a name="BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> : <a class="idref" href="Binom.html#tree"><span class="id" type="inductive">tree</span></a>.<br/>
</div>

<div class="doc">
A priority queue (using the binomial queues data structure) is a
   list of trees.  The <span class="inlinecode"><span class="id" type="var">i</span></span>'th element of the list is either <span class="inlinecode"><span class="id" type="var">Leaf</span></span> or
   it is a power-of-2-heap with exactly <span class="inlinecode">2^<span class="id" type="var">i</span></span> nodes.

<div class="paragraph"> </div>

  This program will make sense to you if you've read the Sedgewick
  reading; otherwise it is rather mysterious.

</div>
<div class="code code-tight">

<span class="id" type="keyword">Definition</span> <a name="BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> := <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.empty"><span class="id" type="definition">empty</span></a> : <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> := <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.smash"><span class="id" type="definition">smash</span></a> (<span class="id" type="var">t</span> <span class="id" type="var">u</span>:  <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) : <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> , <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;|  <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>, <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">y</span> <span class="id" type="var">u<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">if</span>  <span class="id" type="var">x</span> &gt;? <span class="id" type="var">y</span> <span class="id" type="keyword">then</span> <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> (<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">y</span> <span class="id" type="var">u<sub>1</sub></span> <span class="id" type="var">t<sub>1</sub></span>) <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">y</span> (<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">u<sub>1</sub></span>) <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> , <span class="id" type="var">_</span> ⇒ <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>  <span class="comment">(*&nbsp;arbitrary&nbsp;bogus&nbsp;tree&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.carry"><span class="id" type="definition">carry</span></a> (<span class="id" type="var">q</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) (<span class="id" type="var">t</span>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) : <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>, <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>        ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>, <span class="id" type="var">_</span>            ⇒ <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> :: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> :: <span class="id" type="var">q'</span>, <span class="id" type="var">_</span>  ⇒ <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> :: <span class="id" type="var">q'</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">u</span> :: <span class="id" type="var">q'</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>  ⇒ <span class="id" type="var">u</span> :: <span class="id" type="var">q'</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">u</span> :: <span class="id" type="var">q'</span>, <span class="id" type="var">_</span>       ⇒ <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> :: <a class="idref" href="Binom.html#carry"><span class="id" type="definition">carry</span></a> <span class="id" type="var">q'</span> (<a class="idref" href="Binom.html#BinomQueue.smash"><span class="id" type="definition">smash</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="var">u</span>)<br/>
&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.insert"><span class="id" type="definition">insert</span></a> (<span class="id" type="var">x</span>: <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a>) (<span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.carry"><span class="id" type="definition">carry</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> (<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <a class="idref" href="Binom.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>).<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Eval</span> <span class="id" type="tactic">compute</span> <span class="id" type="keyword">in</span> <a class="idref" href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left"><span class="id" type="definition">fold_left</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> <span class="id" type="var">q</span> ⇒<a class="idref" href="Binom.html#BinomQueue.insert"><span class="id" type="definition">insert</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#x"><span class="id" type="variable">x</span></a>) [3;1;4;1;5;9;2;3;5] <a class="idref" href="Binom.html#BinomQueue.empty"><span class="id" type="definition">empty</span></a>.<br/>
</div>

<div class="doc">
<pre>
    = [Node 5 Leaf Leaf;
       Leaf;
       Leaf;
       Node 9
          (Node 4 (Node 3 (Node 1 Leaf Leaf) (Node 1 Leaf Leaf))
             (Node 3 (Node 2 Leaf Leaf) (Node 5 Leaf Leaf)))
          Leaf]
     : priqueue
</pre>
 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.join"><span class="id" type="definition">join</span></a> (<span class="id" type="var">p</span> <span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) (<span class="id" type="var">c</span>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) : <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a>, <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>, <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[], <span class="id" type="var">_</span> , <span class="id" type="var">_</span>            ⇒ <a class="idref" href="Binom.html#BinomQueue.carry"><span class="id" type="definition">carry</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>, [], <span class="id" type="var">_</span>             ⇒ <a class="idref" href="Binom.html#BinomQueue.carry"><span class="id" type="definition">carry</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">p'</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">q'</span>, <span class="id" type="var">_</span>              ⇒ <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a> :: <a class="idref" href="Binom.html#join"><span class="id" type="definition">join</span></a> <span class="id" type="var">p'</span> <span class="id" type="var">q'</span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">p'</span>, <span class="id" type="var">q<sub>1</sub></span>::<span class="id" type="var">q'</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>            ⇒ <span class="id" type="var">q<sub>1</sub></span> :: <a class="idref" href="Binom.html#join"><span class="id" type="definition">join</span></a> <span class="id" type="var">p'</span> <span class="id" type="var">q'</span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">p'</span>, <span class="id" type="var">q<sub>1</sub></span>::<span class="id" type="var">q'</span>, <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  ⇒ <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> :: <a class="idref" href="Binom.html#join"><span class="id" type="definition">join</span></a> <span class="id" type="var">p'</span> <span class="id" type="var">q'</span> (<a class="idref" href="Binom.html#BinomQueue.smash"><span class="id" type="definition">smash</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a> <span class="id" type="var">q<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">p<sub>1</sub></span>::<span class="id" type="var">p'</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">q'</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>            ⇒ <span class="id" type="var">p<sub>1</sub></span> :: <a class="idref" href="Binom.html#join"><span class="id" type="definition">join</span></a> <span class="id" type="var">p'</span> <span class="id" type="var">q'</span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a><br/>
&nbsp;&nbsp;| <span class="id" type="var">p<sub>1</sub></span>::<span class="id" type="var">p'</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">q'</span>,<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>   ⇒ <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> :: <a class="idref" href="Binom.html#join"><span class="id" type="definition">join</span></a> <span class="id" type="var">p'</span> <span class="id" type="var">q'</span> (<a class="idref" href="Binom.html#BinomQueue.smash"><span class="id" type="definition">smash</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a> <span class="id" type="var">p<sub>1</sub></span>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">p<sub>1</sub></span>::<span class="id" type="var">p'</span>, <span class="id" type="var">q<sub>1</sub></span>::<span class="id" type="var">q'</span>, <span class="id" type="var">_</span>                   ⇒ <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a> :: <a class="idref" href="Binom.html#join"><span class="id" type="definition">join</span></a> <span class="id" type="var">p'</span> <span class="id" type="var">q'</span> (<a class="idref" href="Binom.html#BinomQueue.smash"><span class="id" type="definition">smash</span></a> <span class="id" type="var">p<sub>1</sub></span> <span class="id" type="var">q<sub>1</sub></span>)<br/>
&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.unzip"><span class="id" type="definition">unzip</span></a> (<span class="id" type="var">t</span>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) (<span class="id" type="var">cont</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> → <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;|  <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <span class="id" type="var">t<sub>2</sub></span>   ⇒ <a class="idref" href="Binom.html#unzip"><span class="id" type="definition">unzip</span></a> <span class="id" type="var">t<sub>2</sub></span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">q</span> ⇒ <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>  :: <a class="idref" href="Binom.html#cont"><span class="id" type="variable">cont</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ⇒ <a class="idref" href="Binom.html#cont"><span class="id" type="variable">cont</span></a> <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.heap_delete_max"><span class="id" type="definition">heap_delete_max</span></a> (<span class="id" type="var">t</span>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) : <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>  ⇒ <a class="idref" href="Binom.html#BinomQueue.unzip"><span class="id" type="definition">unzip</span></a> <span class="id" type="var">t<sub>1</sub></span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">u</span> ⇒ <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>   <span class="comment">(*&nbsp;bogus&nbsp;value&nbsp;for&nbsp;ill-formed&nbsp;or&nbsp;empty&nbsp;trees&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.find_max'"><span class="id" type="definition">find_max'</span></a> (<span class="id" type="var">current</span>: <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a>) (<span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;|  []         ⇒ <a class="idref" href="Binom.html#current"><span class="id" type="variable">current</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">q'</span> ⇒ <a class="idref" href="Binom.html#find_max'"><span class="id" type="definition">find_max'</span></a> <a class="idref" href="Binom.html#current"><span class="id" type="variable">current</span></a> <span class="id" type="var">q'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> :: <span class="id" type="var">q'</span> ⇒ <a class="idref" href="Binom.html#find_max'"><span class="id" type="definition">find_max'</span></a> (<span class="id" type="keyword">if</span> <span class="id" type="var">x</span> &gt;? <a class="idref" href="Binom.html#current"><span class="id" type="variable">current</span></a> <span class="id" type="keyword">then</span> <span class="id" type="var">x</span> <span class="id" type="keyword">else</span> <a class="idref" href="Binom.html#current"><span class="id" type="variable">current</span></a>) <span class="id" type="var">q'</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.find_max"><span class="id" type="definition">find_max</span></a> (<span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option"><span class="id" type="inductive">option</span></a> <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| [] ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">q'</span> ⇒ <a class="idref" href="Binom.html#find_max"><span class="id" type="definition">find_max</span></a> <span class="id" type="var">q'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> :: <span class="id" type="var">q'</span> ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> (<a class="idref" href="Binom.html#BinomQueue.find_max'"><span class="id" type="definition">find_max'</span></a> <span class="id" type="var">x</span> <span class="id" type="var">q'</span>)<br/>
&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.delete_max_aux"><span class="id" type="definition">delete_max_aux</span></a> (<span class="id" type="var">m</span>: <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a>) (<span class="id" type="var">p</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> * <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> :: <span class="id" type="var">p'</span>   ⇒ <span class="id" type="keyword">let</span> (<span class="id" type="var">j</span>,<span class="id" type="var">k</span>) := <a class="idref" href="Binom.html#delete_max_aux"><span class="id" type="definition">delete_max_aux</span></a> <a class="idref" href="Binom.html#m"><span class="id" type="variable">m</span></a> <span class="id" type="var">p'</span>  <span class="id" type="keyword">in</span> (<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<a class="idref" href="Binom.html#j"><span class="id" type="variable">j</span></a>, <a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> :: <span class="id" type="var">p'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">if</span> <a class="idref" href="Binom.html#m"><span class="id" type="variable">m</span></a> &gt;? <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">then</span> (<span class="id" type="keyword">let</span> (<span class="id" type="var">j</span>,<span class="id" type="var">k</span>) := <a class="idref" href="Binom.html#delete_max_aux"><span class="id" type="definition">delete_max_aux</span></a> <a class="idref" href="Binom.html#m"><span class="id" type="variable">m</span></a> <span class="id" type="var">p'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> (<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<a class="idref" href="Binom.html#j"><span class="id" type="variable">j</span></a>,<a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">else</span> (<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>::<span class="id" type="var">p'</span>, <a class="idref" href="Binom.html#BinomQueue.heap_delete_max"><span class="id" type="definition">heap_delete_max</span></a> (<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">x</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>))<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>, <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>) <span class="comment">(*&nbsp;Bogus&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.delete_max"><span class="id" type="definition">delete_max</span></a> (<span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option"><span class="id" type="inductive">option</span></a> (<a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a> * <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#BinomQueue.find_max"><span class="id" type="definition">find_max</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a>  <span class="id" type="var">m</span> ⇒ <span class="id" type="keyword">let</span> (<span class="id" type="var">p'</span>,<span class="id" type="var">q'</span>) := <a class="idref" href="Binom.html#BinomQueue.delete_max_aux"><span class="id" type="definition">delete_max_aux</span></a> <span class="id" type="var">m</span> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">in</span> <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> (<span class="id" type="var">m</span>, <a class="idref" href="Binom.html#BinomQueue.join"><span class="id" type="definition">join</span></a> <a class="idref" href="Binom.html#p'"><span class="id" type="variable">p'</span></a> <a class="idref" href="Binom.html#q'"><span class="id" type="variable">q'</span></a> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.merge"><span class="id" type="definition">merge</span></a> (<span class="id" type="var">p</span> <span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) := <a class="idref" href="Binom.html#BinomQueue.join"><span class="id" type="definition">join</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>.<br/>
</div>

<div class="doc">
<a name="lab156"></a><h1 class="section">Characterization Predicates</h1>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">t</span></span> is a complete binary tree of depth <span class="inlinecode"><span class="id" type="var">n</span></span>, with every key &lt;= <span class="inlinecode"><span class="id" type="var">m</span></span> 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.pow2heap'"><span class="id" type="definition">pow2heap'</span></a> (<span class="id" type="var">n</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">m</span>: <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a>) (<span class="id" type="var">t</span>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) :=<br/>
&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a>, <a class="idref" href="Binom.html#m"><span class="id" type="variable">m</span></a>, <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;0, <span class="id" type="var">m</span>, <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>       ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;&nbsp;| 0, <span class="id" type="var">m</span>, <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">_</span>, <span class="id" type="var">m</span>,<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a>    ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n'</span>, <span class="id" type="var">m</span>, <a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">k</span> <span class="id" type="var">l</span> <span class="id" type="var">r</span>  ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#m"><span class="id" type="variable">m</span></a> ≥ <span class="id" type="var">k</span> ∧ <a class="idref" href="Binom.html#pow2heap'"><span class="id" type="definition">pow2heap'</span></a> <span class="id" type="var">n'</span> <span class="id" type="var">k</span> <span class="id" type="var">l</span> ∧ <a class="idref" href="Binom.html#pow2heap'"><span class="id" type="definition">pow2heap'</span></a> <span class="id" type="var">n'</span> <a class="idref" href="Binom.html#m"><span class="id" type="variable">m</span></a> <span class="id" type="var">r</span><br/>
&nbsp;<span class="id" type="keyword">end</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">t</span></span> is a power-of-2 heap of depth <span class="inlinecode"><span class="id" type="var">n</span></span> 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Definition</span> <a name="BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> (<span class="id" type="var">n</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t<sub>1</sub></span> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ⇒ <a class="idref" href="Binom.html#BinomQueue.pow2heap'"><span class="id" type="definition">pow2heap'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t<sub>1</sub></span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">l</span></span> is the <span class="inlinecode"><span class="id" type="var">i</span></span>th tail of a binomial heap 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Fixpoint</span> <a name="BinomQueue.priq'"><span class="id" type="definition">priq'</span></a>  (<span class="id" type="var">i</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">l</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Binom.html#l"><span class="id" type="variable">l</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">t</span> :: <span class="id" type="var">l'</span> ⇒ (<span class="id" type="var">t</span>=<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ∨ <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#i"><span class="id" type="variable">i</span></a> <span class="id" type="var">t</span>) ∧ <a class="idref" href="Binom.html#priq'"><span class="id" type="definition">priq'</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="Binom.html#i"><span class="id" type="variable">i</span></a>) <span class="id" type="var">l'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;<span class="id" type="keyword">end</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">q</span></span> is a binomial heap 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Definition</span> <a name="BinomQueue.priq"><span class="id" type="definition">priq</span></a> (<span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) : <span class="id" type="keyword">Prop</span> := <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> 0 <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>.<br/>
</div>

<div class="doc">
<a name="lab157"></a><h1 class="section">Proof of Algorithm Correctness</h1>

<div class="paragraph"> </div>

<a name="lab158"></a><h2 class="section">Various Functions Preserve the Representation Invariant</h2>

<div class="paragraph"> </div>

 ...that is, the <span class="inlinecode"><span class="id" type="var">priq</span></span> property, or the closely related property <span class="inlinecode"><span class="id" type="var">pow2heap</span></span>.

<div class="paragraph"> </div>

<a name="lab159"></a><h4 class="section">练习：1 星 (empty_priq)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.empty_priq"><span class="id" type="lemma">empty_priq</span></a>: <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#BinomQueue.empty"><span class="id" type="definition">empty</span></a>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab160"></a><h4 class="section">练习：2 星 (smash_valid)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.smash_valid"><span class="id" type="lemma">smash_valid</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span>, <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> → <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a> → <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a>) (<a class="idref" href="Binom.html#BinomQueue.smash"><span class="id" type="definition">smash</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab161"></a><h4 class="section">练习：3 星 (carry_valid)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.carry_valid"><span class="id" type="lemma">carry_valid</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">q</span>,  <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">t</span>, (<a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a>=<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ∨ <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a>) → <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="Binom.html#BinomQueue.carry"><span class="id" type="definition">carry</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab162"></a><h4 class="section">练习：2 星, optional (insert_valid)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.insert_priq"><span class="id" type="lemma">insert_priq</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">x</span> <span class="id" type="var">q</span>, <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> → <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> (<a class="idref" href="Binom.html#BinomQueue.insert"><span class="id" type="definition">insert</span></a> <a class="idref" href="Binom.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab163"></a><h4 class="section">练习：3 星, optional (join_valid)</h4>

</div>
<div class="code code-space">
<span class="comment">(*&nbsp;This&nbsp;proof&nbsp;is&nbsp;rather&nbsp;long,&nbsp;but&nbsp;each&nbsp;step&nbsp;is&nbsp;reasonably&nbsp;straightforward.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;There's&nbsp;just&nbsp;one&nbsp;<span class="inlinecode"><span class="id" type="tactic">induction</span></span>&nbsp;to&nbsp;do,&nbsp;right&nbsp;at&nbsp;the&nbsp;beginning.&nbsp;*)</span><br/>
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.join_valid"><span class="id" type="lemma">join_valid</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <span class="id" type="var">c</span> <span class="id" type="var">n</span>, <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> → (<a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a>=<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ∨ <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a>) → <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="Binom.html#BinomQueue.join"><span class="id" type="definition">join</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="code code-tight">

<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.merge_priq"><span class="id" type="lemma">merge_priq</span></a>:  <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> → <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> (<a class="idref" href="Binom.html#BinomQueue.merge"><span class="id" type="definition">merge</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Binom.html#BinomQueue.merge"><span class="id" type="definition">merge</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Binom.html#BinomQueue.join_valid"><span class="id" type="axiom">join_valid</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<a name="lab164"></a><h4 class="section">练习：5 星, optional (delete_max_Some_priq)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.delete_max_Some_priq"><span class="id" type="lemma">delete_max_Some_priq</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <span class="id" type="var">k</span>, <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <a class="idref" href="Binom.html#BinomQueue.delete_max"><span class="id" type="definition">delete_max</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> = <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a>(<a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>,<a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>) → <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab165"></a><h2 class="section">The Abstraction Relation</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" type="var">tree_elems</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode"><span class="id" type="var">l</span></span>    means that the keys in t are the same as the
   elements of l (with repetition) 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Inductive</span> <a name="BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a>: <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a> → <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
| <a name="BinomQueue.tree_elems_leaf"><span class="id" type="constructor">tree_elems_leaf</span></a>: <a class="idref" href="Binom.html#tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><br/>
| <a name="BinomQueue.tree_elems_node"><span class="id" type="constructor">tree_elems_node</span></a>:  <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">bl</span> <span class="id" type="var">br</span> <span class="id" type="var">v</span> <span class="id" type="var">tl</span> <span class="id" type="var">tr</span> <span class="id" type="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#tl"><span class="id" type="variable">tl</span></a> <a class="idref" href="Binom.html#bl"><span class="id" type="variable">bl</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#tr"><span class="id" type="variable">tr</span></a> <a class="idref" href="Binom.html#br"><span class="id" type="variable">br</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="Binom.html#v"><span class="id" type="variable">v</span></a>::<a class="idref" href="Binom.html#bl"><span class="id" type="variable">bl</span></a>++<a class="idref" href="Binom.html#br"><span class="id" type="variable">br</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#tree_elems"><span class="id" type="inductive">tree_elems</span></a> (<a class="idref" href="Binom.html#BinomQueue.Node"><span class="id" type="constructor">Node</span></a> <a class="idref" href="Binom.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="Binom.html#tl"><span class="id" type="variable">tl</span></a> <a class="idref" href="Binom.html#tr"><span class="id" type="variable">tr</span></a>) <a class="idref" href="Binom.html#b"><span class="id" type="variable">b</span></a>.<br/>
</div>

<div class="doc">
<a name="lab166"></a><h4 class="section">练习：3 星 (priqueue_elems)</h4>
 Make an inductive definition, similar to <span class="inlinecode"><span class="id" type="var">tree_elems</span></span>, to relate
  a priority queue  "l"  to a list of all its elements.

<div class="paragraph"> </div>

  As you can see in the definition of <span class="inlinecode"><span class="id" type="var">tree_elems</span></span>,  a <span class="inlinecode"><span class="id" type="var">tree</span></span> relates to
  _any_ permutation of its keys, not just a single permutation.
  You should make your <span class="inlinecode"><span class="id" type="var">priqueue_elems</span></span> relation behave similarly,
  using (basically) the same technique as in <span class="inlinecode"><span class="id" type="var">tree_elems</span></span>.

</div>
<div class="code code-tight">

<span class="id" type="keyword">Inductive</span> <a name="BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.tree"><span class="id" type="inductive">tree</span></a> → <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span><br/>
.<br/>
<span class="comment">(*&nbsp;请勿修改下面这一行：&nbsp;*)</span><br/>
<span class="id" type="keyword">Definition</span> <a name="BinomQueue.manual_grade_for_priqueue_elems"><span class="id" type="definition">manual_grade_for_priqueue_elems</span></a> : <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option"><span class="id" type="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#prod"><span class="id" type="inductive">prod</span></a> <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/library/Coq.Strings.String.html#string"><span class="id" type="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="code code-tight">

<span class="id" type="keyword">Definition</span> <a name="BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> (<span class="id" type="var">p</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) (<span class="id" type="var">al</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a>) := <a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a>.<br/>
</div>

<div class="doc">
<a name="lab167"></a><h2 class="section">Sanity Checks on the Abstraction Relation</h2>

<div class="paragraph"> </div>

<a name="lab168"></a><h4 class="section">练习：2 星 (tree_elems_ext)</h4>
 Extensionality theorem for the tree_elems relation 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.tree_elems_ext"><span class="id" type="lemma">tree_elems_ext</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">t</span> <span class="id" type="var">e<sub>1</sub></span> <span class="id" type="var">e<sub>2</sub></span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#e<sub>1</sub>"><span class="id" type="variable">e<sub>1</sub></span></a> <a class="idref" href="Binom.html#e<sub>2</sub>"><span class="id" type="variable">e<sub>2</sub></span></a> → <a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#e<sub>1</sub>"><span class="id" type="variable">e<sub>1</sub></span></a> → <a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#e<sub>2</sub>"><span class="id" type="variable">e<sub>2</sub></span></a>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab169"></a><h4 class="section">练习：2 星 (tree_perm)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.tree_perm"><span class="id" type="lemma">tree_perm</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">t</span> <span class="id" type="var">e<sub>1</sub></span> <span class="id" type="var">e<sub>2</sub></span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#e<sub>1</sub>"><span class="id" type="variable">e<sub>1</sub></span></a> → <a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#e<sub>2</sub>"><span class="id" type="variable">e<sub>2</sub></span></a> → <a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#e<sub>1</sub>"><span class="id" type="variable">e<sub>1</sub></span></a> <a class="idref" href="Binom.html#e<sub>2</sub>"><span class="id" type="variable">e<sub>2</sub></span></a>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab170"></a><h4 class="section">练习：2 星 (priqueue_elems_ext)</h4>
 To prove <span class="inlinecode"><span class="id" type="var">priqueue_elems_ext</span></span>, you should almost be able to cut-and-paste the
   proof of <span class="inlinecode"><span class="id" type="var">tree_elems_ext</span></span>, with just a few edits.  
</div>
<div class="code code-tight">

<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.priqueue_elems_ext"><span class="id" type="lemma">priqueue_elems_ext</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">q</span> <span class="id" type="var">e<sub>1</sub></span> <span class="id" type="var">e<sub>2</sub></span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#e<sub>1</sub>"><span class="id" type="variable">e<sub>1</sub></span></a> <a class="idref" href="Binom.html#e<sub>2</sub>"><span class="id" type="variable">e<sub>2</sub></span></a> → <a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#e<sub>1</sub>"><span class="id" type="variable">e<sub>1</sub></span></a> → <a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#e<sub>2</sub>"><span class="id" type="variable">e<sub>2</sub></span></a>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab171"></a><h4 class="section">练习：2 星 (abs_perm)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.abs_perm"><span class="id" type="lemma">abs_perm</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">al</span> <span class="id" type="var">bl</span>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a> → <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#bl"><span class="id" type="variable">bl</span></a> → <a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a> <a class="idref" href="Binom.html#bl"><span class="id" type="variable">bl</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab172"></a><h4 class="section">练习：2 星 (can_relate)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Lemma</span> <a name="BinomQueue.tree_can_relate"><span class="id" type="lemma">tree_can_relate</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">t</span>, <span style='font-size:120%;'>&exist;</span> <span class="id" type="var">al</span>, <a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/><hr class='doublespaceincode'/>
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.can_relate"><span class="id" type="lemma">can_relate</span></a>:  <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span>, <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <span style='font-size:120%;'>&exist;</span> <span class="id" type="var">al</span>, <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab173"></a><h2 class="section">Various Functions Preserve the Abstraction Relation</h2>
<a name="lab174"></a><h4 class="section">练习：1 星 (empty_relate)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.empty_relate"><span class="id" type="lemma">empty_relate</span></a>:  <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#BinomQueue.empty"><span class="id" type="definition">empty</span></a> <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab175"></a><h4 class="section">练习：3 星 (smash_elems)</h4>
  Warning:  This proof is rather long. 
</div>
<div class="code code-tight">

<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.smash_elems"><span class="id" type="lemma">smash_elems</span></a>: <span style='font-size:120%;'>&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">bt</span> <span class="id" type="var">bu</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> → <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#bt"><span class="id" type="variable">bt</span></a> → <a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a> <a class="idref" href="Binom.html#bu"><span class="id" type="variable">bu</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> (<a class="idref" href="Binom.html#BinomQueue.smash"><span class="id" type="definition">smash</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#u"><span class="id" type="variable">u</span></a>) (<a class="idref" href="Binom.html#bt"><span class="id" type="variable">bt</span></a> ++ <a class="idref" href="Binom.html#bu"><span class="id" type="variable">bu</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab176"></a><h2 class="section">Optional Exercises</h2>

<div class="paragraph"> </div>

  Some of these proofs are quite long, but they're not especially tricky. 
<div class="paragraph"> </div>

<a name="lab177"></a><h4 class="section">练习：4 星, optional (carry_elems)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.carry_elems"><span class="id" type="lemma">carry_elems</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">n</span> <span class="id" type="var">q</span>,  <a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">t</span>, (<a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a>=<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ∨ <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">eq</span> <span class="id" type="var">et</span>, <a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#eq"><span class="id" type="variable">eq</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Binom.html#et"><span class="id" type="variable">et</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> (<a class="idref" href="Binom.html#BinomQueue.carry"><span class="id" type="definition">carry</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#t"><span class="id" type="variable">t</span></a>) (<a class="idref" href="Binom.html#eq"><span class="id" type="variable">eq</span></a>++<a class="idref" href="Binom.html#et"><span class="id" type="variable">et</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab178"></a><h4 class="section">练习：2 星, optional (insert_elems)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.insert_relate"><span class="id" type="lemma">insert_relate</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">al</span> <span class="id" type="var">k</span>, <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a> → <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> (<a class="idref" href="Binom.html#BinomQueue.insert"><span class="id" type="definition">insert</span></a> <a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>::<a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab179"></a><h4 class="section">练习：4 星, optional (join_elems)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.join_elems"><span class="id" type="lemma">join_elems</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <span class="id" type="var">c</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priq'"><span class="id" type="definition">priq'</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a>=<a class="idref" href="Binom.html#BinomQueue.Leaf"><span class="id" type="constructor">Leaf</span></a> ∨ <a class="idref" href="Binom.html#BinomQueue.pow2heap"><span class="id" type="definition">pow2heap</span></a> <a class="idref" href="Binom.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">pe</span> <span class="id" type="var">qe</span> <span class="id" type="var">ce</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#pe"><span class="id" type="variable">pe</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#qe"><span class="id" type="variable">qe</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.tree_elems"><span class="id" type="inductive">tree_elems</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="Binom.html#ce"><span class="id" type="variable">ce</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priqueue_elems"><span class="id" type="inductive">priqueue_elems</span></a> (<a class="idref" href="Binom.html#BinomQueue.join"><span class="id" type="definition">join</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#c"><span class="id" type="variable">c</span></a>) (<a class="idref" href="Binom.html#ce"><span class="id" type="variable">ce</span></a>++<a class="idref" href="Binom.html#pe"><span class="id" type="variable">pe</span></a>++<a class="idref" href="Binom.html#qe"><span class="id" type="variable">qe</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab180"></a><h4 class="section">练习：2 星, optional (merge_relate)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.merge_relate"><span class="id" type="lemma">merge_relate</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <span class="id" type="var">pl</span> <span class="id" type="var">ql</span> <span class="id" type="var">al</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#pl"><span class="id" type="variable">pl</span></a> → <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#ql"><span class="id" type="variable">ql</span></a> → <a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> (<a class="idref" href="Binom.html#BinomQueue.merge"><span class="id" type="definition">merge</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>) <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#al"><span class="id" type="variable">al</span></a> (<a class="idref" href="Binom.html#pl"><span class="id" type="variable">pl</span></a>++<a class="idref" href="Binom.html#ql"><span class="id" type="variable">ql</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab181"></a><h4 class="section">练习：5 星, optional (delete_max_None_relate)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.delete_max_None_relate"><span class="id" type="lemma">delete_max_None_relate</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> <span class="id" type="var">p</span>, <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> → (<a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a> ↔ <a class="idref" href="Binom.html#BinomQueue.delete_max"><span class="id" type="definition">delete_max</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> = <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a>).<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

<a name="lab182"></a><h4 class="section">练习：5 星, optional (delete_max_Some_relate)</h4>

</div>
<div class="code code-space">
<span class="id" type="keyword">Theorem</span> <a name="BinomQueue.delete_max_Some_relate"><span class="id" type="lemma">delete_max_Some_relate</span></a>:<br/>
&nbsp;&nbsp;<span style='font-size:120%;'>&forall;</span> (<span class="id" type="var">p</span> <span class="id" type="var">q</span>: <a class="idref" href="Binom.html#BinomQueue.priqueue"><span class="id" type="definition">priqueue</span></a>) <span class="id" type="var">k</span> (<span class="id" type="var">pl</span> <span class="id" type="var">ql</span>: <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Binom.html#BinomQueue.key"><span class="id" type="definition">key</span></a>), <a class="idref" href="Binom.html#BinomQueue.priq"><span class="id" type="definition">priq</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> →<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="Binom.html#pl"><span class="id" type="variable">pl</span></a> →<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.delete_max"><span class="id" type="definition">delete_max</span></a> <a class="idref" href="Binom.html#p"><span class="id" type="variable">p</span></a> = <a class="idref" href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> (<a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>,<a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a>) →<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Binom.html#BinomQueue.Abs"><span class="id" type="definition">Abs</span></a> <a class="idref" href="Binom.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="Binom.html#ql"><span class="id" type="variable">ql</span></a> →<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation"><span class="id" type="inductive">Permutation</span></a> <a class="idref" href="Binom.html#pl"><span class="id" type="variable">pl</span></a> (<a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>::<a class="idref" href="Binom.html#ql"><span class="id" type="variable">ql</span></a>) ∧ <a class="idref" href="http://coq.inria.fr/library/Coq.Lists.List.html#Forall"><span class="id" type="inductive">Forall</span></a> (<a class="idref" href="http://coq.inria.fr/library/Coq.Init.Peano.html#ge"><span class="id" type="definition">ge</span></a> <a class="idref" href="Binom.html#k"><span class="id" type="variable">k</span></a>) <a class="idref" href="Binom.html#ql"><span class="id" type="variable">ql</span></a>.<br/>
<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" type="var">Admitted</span>.<br/>
</div>

<span class="proofbox">&#9744;</span> 
<div class="doc less-space">
<div class="paragraph"> </div>

 With the following line, we're done!  We have demonstrated that
  Binomial Queues are a correct implementation of mergeable
  priority queues.  That is, we have exhibited a <span class="inlinecode"><span class="id" type="keyword">Module</span></span> <span class="inlinecode"><span class="id" type="var">BinomQueue</span></span>
  that satisfies the <span class="inlinecode"><span class="id" type="keyword">Module</span></span> <span class="inlinecode"><span class="id" type="keyword">Type</span></span> <span class="inlinecode"><span class="id" type="var">PRIQUEUE</span></span>. 
</div>
<div class="code code-tight">

<span class="id" type="keyword">End</span> <a class="idref" href="Binom.html#BinomQueue"><span class="id" type="module">BinomQueue</span></a>.<br/>
</div>

<div class="doc">
<a name="lab183"></a><h1 class="section">Measurement.</h1>

<div class="paragraph"> </div>

<a name="lab184"></a><h4 class="section">练习：5 星, optional (binom_measurement)</h4>
 Adapt the program (but not necessarily the proof) to use Ocaml integers
  as keys, in the style shown in <a href="Extract.html"><span class="inlineref">Extract</span></a>.   Write an ML program to
  exercise it with random inputs.  Compare the runtime to the implementation
  from <a href="Priqueue.html"><span class="inlineref">Priqueue</span></a>, also adapted for Ocaml integers.
 <span class="proofbox">&#9744;</span> 
</div>
</div>



</div>

</body>
</html>