<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="common/css/sf.css" rel="stylesheet" type="text/css" />
<title>Stlc: 简单类型 Lambda-演算</title>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/plf.css" rel="stylesheet" type="text/css"/>
</head>

<body>

<div id="page">

<div id="header">
<div id='logoinheader'><a href='https://coq-zh.github.io/SF-zh/'>
<img src='common/media/image/sf_logo_sm.png' alt='Software Foundations Logo'></a></div>
<div class='booktitleinheader'><a href='index.html'>Volume 2: 编程语言基础</a></div>
<ul id='menu'>
   <li class='section_name'><a href='toc.html'>目录</a></li>
   <li class='section_name'><a href='coqindex.html'>索引</a></li>
   <li class='section_name'><a href='deps.html'>路线</a></li>
</ul>
</div>

<div id="main">

<h1 class="libtitle">Stlc<span class="subtitle">简单类型 Lambda-演算</span></h1>

<div class="code">
</div>

<div class="doc">

<div class="paragraph"> </div>

 简单类型 lambda-演算（simply typed lambda-calculus，STLC）
    作为一种小型演算系统体现了<i>'函数抽象（functional abstraction）'</i>这个重要概念，
    函数抽象也以很多种形式（函数，过程，方法等）出现在真实世界的程序语言中。

<div class="paragraph"> </div>

    在形式化这个演算系统（语法，小步语义和定型规则）及其主要性质（可进性和保型性）时，
    我们采用与上一章相同的流程。新的技术挑战来自于<i>'变量绑定（variable binding）'</i>
    和<i>'替换（substitution）'</i>。我们将会费一些功夫来处理他们。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-notation-overridden,-parsing".<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/library//Coq.Strings.String.html#"><span class="id" title="library">Strings.String</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">PLF</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Maps</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">PLF</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Smallstep.html#"><span class="id" title="library">Smallstep</span></a>.<br/>
</div>

<div class="doc">
<a name="lab205"></a><h1 class="section">简介</h1>

<div class="paragraph"> </div>

 STLC 构建于一些<i>'基础类型（base types）'</i>的集合之上：
    布尔值，数字，字符串等。具体选择哪些基础类型并不重要——语言的构造和它的理论性质
    不会受到影响——因此简单起见，让我们暂时只使用 <span class="inlinecode"><span class="id" title="var">Bool</span></span>。在本章的最后，我们会看到
    如何添加更多的基础类型，后面的章节我们还会用一些实用的构造，例如序对、记录、子类型
    和可变状态来扩展纯 STLC。

<div class="paragraph"> </div>

    我们以布尔值常量和条件语句开始，并添加三个构造：
<ul class="doclist">
<li> 变量

</li>
<li> 函数抽象

</li>
<li> 应用

</li>
</ul>

<div class="paragraph"> </div>

    这给了我们如下的抽象语法构造（先以非形式化的 BNF 记法写下——后面我们
    会形式化它）。 
<div class="paragraph"> </div>

<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>:</span>:</span>=</span> <span class="id" title="var">x</span>                         <span class="id" title="var">variable</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| \<span class="id" title="var">x</span>:<span class="id" title="var">T.t</span>                    <span class="id" title="var">abstraction</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">t</span> <span class="id" title="var">t</span>                       <span class="id" title="var">application</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">tru</span>                       <span class="id" title="var">constant</span> <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">fls</span>                       <span class="id" title="var">constant</span> <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">test</span> <span class="id" title="var">t</span> <span class="id" title="keyword">then</span> <span class="id" title="var">t</span> <span class="id" title="keyword">else</span> <span class="id" title="var">t</span>      <span class="id" title="var">conditional</span>
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

 函数抽象 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T.t</span></span> 中的 <span class="inlinecode">\</span> 符号一般写作希腊字母“lambda”（本演算系统由此得名）。
    变量 <span class="inlinecode"><span class="id" title="var">x</span></span> 叫做函数的<i>'参数（parameter）'</i>；项 <span class="inlinecode"><span class="id" title="var">t</span></span> 是<i>'函数体（body）'</i>。
    记号 <span class="inlinecode">:<span class="id" title="var">T</span></span> 指明了函数可以被应用的参数类型。
<div class="paragraph"> </div>

 一些例子：

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span>

<div class="paragraph"> </div>

        布尔值的恒等函数。

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> <span class="inlinecode"><span class="id" title="var">tru</span></span>

<div class="paragraph"> </div>

        被应用于 <span class="inlinecode"><span class="id" title="var">tru</span></span> 的布尔值恒等函数。

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">fls</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span>

<div class="paragraph"> </div>

        布尔值的“否定”函数。

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">tru</span></span>

<div class="paragraph"> </div>

        总是接受（布尔值）参数并返回 <span class="inlinecode"><span class="id" title="var">tru</span></span> 的常量函数。
</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span>

<div class="paragraph"> </div>

        接受两个布尔值做参数，并返回第一个参数的函数。（在 Coq 中，二元函数
        其实就是一个一元函数，只是其函数体也是一元函数。）

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> <span class="inlinecode"><span class="id" title="var">fls</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span>

<div class="paragraph"> </div>

        一个接受两个布尔值做参数，并返回第一个参数的函数，接着它被应用于两个布尔值参数
        <span class="inlinecode"><span class="id" title="var">fls</span></span> 和 <span class="inlinecode"><span class="id" title="var">tru</span></span>。

<div class="paragraph"> </div>

        在 Coq 中，应用是左结合的——也即，这个表达式被解析为
        <span class="inlinecode">((\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> <span class="inlinecode"><span class="id" title="var">fls</span>)</span> <span class="inlinecode"><span class="id" title="var">tru</span></span>。

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">\<span class="id" title="var">f</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">tru</span>)</span>

<div class="paragraph"> </div>

        一个高阶函数其接受一个函数 <span class="inlinecode"><span class="id" title="var">f</span></span>（从布尔值到布尔值）作为参数，并应用
        <span class="inlinecode"><span class="id" title="var">f</span></span> 于参数 <span class="inlinecode"><span class="id" title="var">tru</span></span>；其结果又被应用于 <span class="inlinecode"><span class="id" title="var">f</span></span>。

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">(\<span class="id" title="var">f</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">tru</span>))</span> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">fls</span>)</span>

<div class="paragraph"> </div>

        同一个高阶函数，被应用于返回 <span class="inlinecode"><span class="id" title="var">fls</span></span> 的常函数。 
</li>
</ul>

<div class="paragraph"> </div>

 正如最后几个例子中展示的那样，STLC是一个支持<i>'高阶（higher-order）'</i>
    函数的语言：我们可以写出接受其他函数作为参数，或返回其他函数作为结果的函数。

<div class="paragraph"> </div>

    但是 STLC 并没提供任何原生语法来定义<i>'有名函数（named functions）'</i>——
    所有的函数都是“匿名的（anonymous）”。我们会在 <span class="inlinecode"><span class="id" title="var">MoreStlc</span></span> 一章中看到添加有名
    函数是十分简单的——确实，基本的命名和绑定机制其实是同一回事。

<div class="paragraph"> </div>

    STLC 的<i>'类型（types）'</i>包括 <span class="inlinecode"><span class="id" title="var">Bool</span></span>，其用于把 <span class="inlinecode"><span class="id" title="var">tru</span></span> 和 <span class="inlinecode"><span class="id" title="var">fls</span></span> 这些常量
    和其他产生布尔值的复杂计算归为一类；还有<i>'函数类型（arrow types）'</i>，用于把函
    数归为一类。
<div class="paragraph"> </div>

<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">T</span> <span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>:</span>:</span>=</span> <span class="id" title="var">Bool</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">T</span> → <span class="id" title="var">T</span>
<div class="paragraph"> </div>

</span>    比如说：

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">fls</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> <span class="inlinecode"><span class="id" title="var">tru</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">Bool</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span></span>
                              （即 <span class="inlinecode"><span class="id" title="var">Bool</span></span> <span class="inlinecode">→</span> <span class="inlinecode">(<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>）</span>）

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> <span class="inlinecode"><span class="id" title="var">fls</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> <span class="inlinecode"><span class="id" title="var">fls</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">Bool</span></span> 
</li>
</ul>

</div>

<div class="doc">
<a name="lab206"></a><h1 class="section">语法</h1>

<div class="paragraph"> </div>

 我们接下来形式化 STLC 的语法。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a name="STLC"><span class="id" title="module">STLC</span></a>.<br/>
</div>

<div class="doc">
<a name="lab207"></a><h2 class="section">类型</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="STLC.ty"><span class="id" title="inductive">ty</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="STLC.Bool"><span class="id" title="constructor">Bool</span></a>  : <a class="idref" href="Stlc.html#ty"><span class="id" title="inductive">ty</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> : <a class="idref" href="Stlc.html#ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#ty"><span class="id" title="inductive">ty</span></a>.<br/>
</div>

<div class="doc">
<a name="lab208"></a><h2 class="section">项</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="STLC.tm"><span class="id" title="inductive">tm</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="STLC.var"><span class="id" title="constructor">var</span></a> : <a class="idref" href="http://coq.inria.fr/library//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.app"><span class="id" title="constructor">app</span></a> : <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.abs"><span class="id" title="constructor">abs</span></a> : <a class="idref" href="http://coq.inria.fr/library//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#STLC.ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.tru"><span class="id" title="constructor">tru</span></a> : <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.fls"><span class="id" title="constructor">fls</span></a> : <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.test"><span class="id" title="constructor">test</span></a> : <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#tm"><span class="id" title="inductive">tm</span></a>.<br/>
</div>

<div class="doc">
请注意一个形如 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T.t</span></span> 的抽象（形式化地讲是 <span class="inlinecode"><span class="id" title="var">abs</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span>）包含其参数
    <span class="inlinecode"><span class="id" title="var">T</span></span> 的类型注释，相反在 Coq（以及其他函数式语言，比如 ML，Haskell等）中，
    会使用类型推导来填补这些类型注释。我们在此不考虑类型推导。 
<div class="paragraph"> </div>

 一些例子…… 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Definition</span> <a name="STLC.x"><span class="id" title="definition">x</span></a> := "x".<br/>
<span class="id" title="keyword">Definition</span> <a name="STLC.y"><span class="id" title="definition">y</span></a> := "y".<br/>
<span class="id" title="keyword">Definition</span> <a name="STLC.z"><span class="id" title="definition">z</span></a> := "z".<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>.<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>.<br/>
<span class="id" title="keyword">Hint Unfold</span> <a class="idref" href="Stlc.html#STLC.z"><span class="id" title="definition">z</span></a>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">idB</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a name="STLC.idB"><span class="id" title="abbreviation">idB</span></a> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>)).<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">idBB</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a name="STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>) (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>)).<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">idBBBB</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">x</span>:(<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>)</span> <span class="inlinecode">→</span> <span class="inlinecode">(<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>).</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a name="STLC.idBBBB"><span class="id" title="abbreviation">idBBBB</span></a> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>)).<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">k</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a name="STLC.k"><span class="id" title="abbreviation">k</span></a> := (<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>))).<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">notB</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">fls</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Notation</span> <a name="STLC.notB"><span class="id" title="abbreviation">notB</span></a> := (<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>) <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a> <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a>)).<br/>
</div>

<div class="doc">
（我们使用 <span class="inlinecode"><span class="id" title="keyword">Notation</span></span> 而非 <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> 使 <span class="inlinecode"><span class="id" title="var">atuo</span></span> 更有效。）
</div>

<div class="doc">
<a name="lab209"></a><h1 class="section">操作语义</h1>

<div class="paragraph"> </div>

 为了定义 STLC 项的小步语义，我们以值的集合的定义开始。接着，我们定义两个
    重要的概念，<i>'自由变量（free variables）'</i>和<i>'替换（substitution）'</i>，
    他们在函数应用的归约规则中会被用到。最后，我们给出小步归约关系。 
</div>

<div class="doc">
<a name="lab210"></a><h2 class="section">值</h2>

<div class="paragraph"> </div>

 在定义 STLC 的值时，我们有几个情形需要考虑。

<div class="paragraph"> </div>

    首先，对于布尔值而言是显然的：<span class="inlinecode"><span class="id" title="var">true</span></span> 和 <span class="inlinecode"><span class="id" title="var">false</span></span> 是仅有的值。
    一个 <span class="inlinecode"><span class="id" title="var">test</span></span> 表达式不是值。
<div class="paragraph"> </div>

 其次，一个应用也不会是值：它表示一个函数正在某个参数上被调用，显然还可以继续归约。
<div class="paragraph"> </div>

 第三，对于抽象，我们有几个选择：

<div class="paragraph"> </div>

<ul class="doclist">
<li> 我们可以说仅当 <span class="inlinecode"><span class="id" title="var">t</span></span> 是值时 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T</span>.</span> <span class="inlinecode"><span class="id" title="var">t</span></span> 是值——也即，仅当函数体已经被归约
        （在不知道被应用的参数是什么的情况下尽可能地归约）。

<div class="paragraph"> </div>


</li>
<li> 或者，我们可以说不论 <span class="inlinecode"><span class="id" title="var">t</span></span> 是不是值，<span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T</span>.</span> <span class="inlinecode"><span class="id" title="var">t</span></span> 都是一个值——换句话说，
        归约止于抽象。

</li>
</ul>

<div class="paragraph"> </div>

    在 Coq 中表达式通常是以第一种方式求值的——比如说，
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Compute</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span>:<span class="id" title="var">bool</span> ⇒ 3 + 4)
<div class="paragraph"> </div>

</span>    会得到
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span>:<span class="id" title="var">bool</span> ⇒ 7
<div class="paragraph"> </div>

</span>    多数现实世界中的程序语言选择了第二种方式——函数体的归约仅发生在函数实际被应用
    于某个参数时。在这里我们也选择第二种方式。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="STLC.value"><span class="id" title="inductive">value</span></a> : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLC.v_abs"><span class="id" title="constructor">v_abs</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#value"><span class="id" title="inductive">value</span></a> (<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stlc.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a name="STLC.v_tru"><span class="id" title="constructor">v_tru</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.v_fls"><span class="id" title="constructor">v_fls</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Stlc.html#value"><span class="id" title="inductive">value</span></a>.<br/>
</div>

<div class="doc">
最后，我们必须考虑什么构成了一个<i>'完整（complete）'</i>的程序。

<div class="paragraph"> </div>

    直观地讲，一个“完整的程序”不能包含未定义的变量。我们很快会看到如何定义 STLC
    项中的<i>'自由（free）'</i>变量。一个完整的程序是<i>'闭合的（closed）'</i>——也就是说，
    它不含有自由变量。

<div class="paragraph"> </div>

    （相反，含有自由变量的项一般被叫做<i>'开放项（open term）'</i>。） 
<div class="paragraph"> </div>

 由于我们决定不对抽象内的表达式进行归约，因此也不必担心变量是否是值这个问题。
    因为我们总是“从外向内”地归约程序，这意味着 <span class="inlinecode"><span class="id" title="var">step</span></span> 关系仅会处理闭合项。 
</div>

<div class="doc">
<a name="lab211"></a><h2 class="section">替换</h2>

<div class="paragraph"> </div>

 现在我们来到了 STLC 的核心：用一个项替换另一个项中的变量。这个操作在下面用于
    定义函数应用的操作语义，其中我们会需要用一个参数项替换函数体中出现的形式参数。
    比如说，我们会归约
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">test</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">tru</span> <span class="id" title="keyword">else</span> <span class="id" title="var">x</span>) <span class="id" title="var">fls</span>
<div class="paragraph"> </div>

</span>    到
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">test</span> <span class="id" title="var">fls</span> <span class="id" title="keyword">then</span> <span class="id" title="var">tru</span> <span class="id" title="keyword">else</span> <span class="id" title="var">fls</span>
<div class="paragraph"> </div>

</span>    这步归约将函数体中出现的参数 <span class="inlinecode"><span class="id" title="var">x</span></span> 替换为 <span class="inlinecode"><span class="id" title="var">fls</span></span>。

<div class="paragraph"> </div>

    一般来说，我们可以用给定的项 <span class="inlinecode"><span class="id" title="var">s</span></span> 替换的某另一个项 <span class="inlinecode"><span class="id" title="var">t</span></span> 中出现个变量 <span class="inlinecode"><span class="id" title="var">x</span></span>。
    在非形式化的讨论中，这通常被写做 <span class="inlinecode"></span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t</span></span> <span class="inlinecode"></span>，并读做“替换 <span class="inlinecode"><span class="id" title="var">t</span></span> 中的 <span class="inlinecode"><span class="id" title="var">x</span></span>
    为 <span class="inlinecode"><span class="id" title="var">s</span></span>”。
<div class="paragraph"> </div>

 这里有一些例子：

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode">(<span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">fls</span>)</span>
           产生 <span class="inlinecode"><span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">fls</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 产生 <span class="inlinecode"><span class="id" title="var">tru</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode">(<span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">y</span>)</span> 产生 <span class="inlinecode"><span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode"><span class="id" title="var">y</span></span> 产生 <span class="inlinecode"><span class="id" title="var">y</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode"><span class="id" title="var">fls</span></span> yields <span class="inlinecode"><span class="id" title="var">fls</span></span> (vacuous substitution)

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode">(\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">fls</span>)</span>
           产生 <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">test</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">tru</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">fls</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode">(\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> 产生 <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">tru</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode">(\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">y</span>)</span> 产生 <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">y</span></span>

<div class="paragraph"> </div>


</li>
<li> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">tru</span>]</span> <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span>)</span> 产生 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span>

</li>
</ul>

<div class="paragraph"> </div>

    最后一个例子非常重要：替换 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 中的 <span class="inlinecode"><span class="id" title="var">x</span></span> 为 <span class="inlinecode"><span class="id" title="var">tru</span></span> <i>'不'</i>会产生
    <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">tru</span></span>！因为 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span> 中的 <span class="inlinecode"><span class="id" title="var">x</span></span> 是被这个抽象所<i>'绑定的（bound）'</i>：
    它是一个新的、局部的名字，只是恰巧写做了跟某个全局名字一样的 <span class="inlinecode"><span class="id" title="var">x</span></span>。
<div class="paragraph"> </div>

 这是非形式化的定义……
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">x</span>               = <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">y</span>               = <span class="id" title="var">y</span>                     <span class="id" title="keyword">if</span> <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>](\<span class="id" title="var">x</span>:<span class="id" title="var">T<sub>11</sub></span>. <span class="id" title="var">t<sub>12</sub></span>)   = \<span class="id" title="var">x</span>:<span class="id" title="var">T<sub>11</sub></span>. <span class="id" title="var">t<sub>12</sub></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>](\<span class="id" title="var">y</span>:<span class="id" title="var">T<sub>11</sub></span>. <span class="id" title="var">t<sub>12</sub></span>)   = \<span class="id" title="var">y</span>:<span class="id" title="var">T<sub>11</sub></span>. [<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t<sub>12</sub></span>     <span class="id" title="keyword">if</span> <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>](<span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span>)         = ([<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t<sub>1</sub></span>) ([<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t<sub>2</sub></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">tru</span>             = <span class="id" title="var">tru</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">fls</span>             = <span class="id" title="var">fls</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>](<span class="id" title="var">test</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="keyword">then</span> <span class="id" title="var">t<sub>2</sub></span> <span class="id" title="keyword">else</span> <span class="id" title="var">t<sub>3</sub></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">test</span> [<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t<sub>1</sub></span> <span class="id" title="keyword">then</span> [<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t<sub>2</sub></span> <span class="id" title="keyword">else</span> [<span class="id" title="var">x</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t<sub>3</sub></span>
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

 ……以及形式化的： 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;'[' x ':=' s ']' t" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20).<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Fixpoint</span> <a name="STLC.subst"><span class="id" title="definition">subst</span></a> (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/library//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a>) (<span class="id" title="var">t</span> : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a>) : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Stlc.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <span class="id" title="var">x'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">eqb_string</span> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">x'</span> <span class="id" title="keyword">then</span> <a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="Stlc.html#t"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <span class="id" title="var">x'</span> <span class="id" title="var">T</span> <span class="id" title="var">t<sub>1</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <span class="id" title="var">x'</span> <span class="id" title="var">T</span> (<span class="id" title="keyword">if</span> <span class="id" title="definition">eqb_string</span> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">x'</span> <span class="id" title="keyword">then</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="keyword">else</span> (<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a> <span class="id" title="var">t<sub>1</sub></span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a> <span class="id" title="var">t<sub>1</sub></span>) (<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a> <span class="id" title="var">t<sub>2</sub></span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span> <span class="id" title="var">t<sub>3</sub></span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> (<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a> <span class="id" title="var">t<sub>1</sub></span>) (<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a> <span class="id" title="var">t<sub>2</sub></span>) (<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a> <span class="id" title="var">t<sub>3</sub></span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">&quot;</span></a>'[' x ':=' s ']' t" := (<a class="idref" href="Stlc.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>).<br/>
</div>

<div class="doc">
<i>'技术注解'</i>：如果我们考虑用于替换掉某个变量的项 <span class="inlinecode"><span class="id" title="var">s</span></span> 其本身也含有自由变量，
    那么定义替换将会变得困难一点。由于我们仅对定义在<i>'闭合'</i>项（也即像 <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">x</span></span>
    这种绑定了内部全部变量的项）上的 <span class="inlinecode"><span class="id" title="var">step</span></span> 关系有兴趣，我们可以规避这个额外的复杂性，
    但是当形式化构造更丰富的语言时，我们必须考虑这一点。
<div class="paragraph"> </div>

 比如说，使用上面的替换定义将 <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">r</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">z</span></span>（其中 <span class="inlinecode"><span class="id" title="var">r</span></span> 为绑定变量）中的
    <span class="inlinecode"><span class="id" title="var">z</span></span> 替换为<i>'开放'</i>项 <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">r</span></span>（其中 <span class="inlinecode"><span class="id" title="var">r</span></span> 是引用了某个全局资源的自由变量），
    我们会得到 <span class="inlinecode">\<span class="id" title="var">r</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">r</span></span>。这时，<span class="inlinecode"><span class="id" title="var">s</span></span> 中的自由引用 <span class="inlinecode"><span class="id" title="var">r</span></span> 被 <span class="inlinecode"><span class="id" title="var">t</span></span> 所引入
    的绑定所“捕获”。

<div class="paragraph"> </div>

    为什么这是件坏事呢？因为它违反了“绑定变量的名字不应当改变语义”这个原则。打个比方，
    如果把 <span class="inlinecode"><span class="id" title="var">t</span></span> 的绑定变量重命名，比如说，<span class="inlinecode"><span class="id" title="var">t'</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">w</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">z</span></span>，那么 <span class="inlinecode">[<span class="id" title="var">z</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t'</span></span>
    会产生 <span class="inlinecode">\<span class="id" title="var">w</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">r</span></span>，其行为和 <span class="inlinecode">[<span class="id" title="var">z</span>:=<span class="id" title="var">s</span>]<span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">r</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode"><span class="id" title="var">r</span></span>
    并不相同。这意味着，重命名绑定变量改变了 <span class="inlinecode"><span class="id" title="var">t</span></span> 在替换时的行为。 
<div class="paragraph"> </div>

 对于这个问题，更详细的讨论可参考 <a href="Bib.html#Aydemir-2008"><span class="inlineref">[Aydemir 2008]</span></a>。
<div class="paragraph"> </div>

<a name="lab212"></a><h4 class="section">练习：3 星, standard (substi_correct)</h4>
 上面我们使用了 Coq 的 <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span> 功能将替换定义为一个<i>'函数'</i>。
    假设，现在我们想要将替换定义为一个归纳的<i>'关系'</i> <span class="inlinecode"><span class="id" title="var">substi</span></span>。作为开始，我们给出了
    <span class="inlinecode"><span class="id" title="keyword">Inductive</span></span> 定义的头部和其中一个构造子；你的任务是完成剩下的构造子，并证明
    你的定义同替换函数的定义相一致。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="STLC.substi"><span class="id" title="inductive">substi</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/library//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLC.s_var1"><span class="id" title="constructor">s_var1</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#substi"><span class="id" title="inductive">substi</span></a> <a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span><br/>
.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Stlc.html#substi"><span class="id" title="inductive">substi</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Theorem</span> <a name="STLC.substi_correct"><span class="id" title="lemma">substi_correct</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a><a class="idref" href="Stlc.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Stlc.html#t'"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#df1ced36fc33ce188051218bca314374"><span class="id" title="notation">↔</span></a> <a class="idref" href="Stlc.html#STLC.substi"><span class="id" title="inductive">substi</span></a> <a class="idref" href="Stlc.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="Stlc.html#t'"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>


<div class="doc">
<a name="lab213"></a><h2 class="section">归约</h2>

<div class="paragraph"> </div>

 STLC 的小步语义与之前学过的小步语义遵循了同样的模式。直观地说，
    对于函数应用我们首先归约其左手边的项（也即函数）直到其成为一个抽象；
    接着归约其右手边的项（也即参数）直到其成为一个值；最后我们用参数替换函数
    体内的绑定变量。最后一条规则可以非形式化地写做
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">T.t12</span>) <span class="id" title="var">v<sub>2</sub></span> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> [<span class="id" title="var">x</span>:=<span class="id" title="var">v<sub>2</sub></span>]<span class="id" title="var">t<sub>12</sub></span>
<div class="paragraph"> </div>

</span>    传统上这也被称作<i>'beta-归约（beta-reduction）'</i> 
<div class="paragraph"> </div>

 <center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">value v<sub>2</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (ST_AppAbs) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(\x:T.t12) v<sub>2</sub> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> [x:=v<sub>2</sub>]t<sub>12</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_App1) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub> t<sub>2</sub> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> t<sub>1</sub>' t<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">value v<sub>1</sub></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule">t<sub>2</sub> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> t<sub>2</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_App2) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">v<sub>1</sub> t<sub>2</sub> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> v<sub>1</sub> t<sub>2</sub>'</td>
  <td></td>
</td>
</table></center> ……还有对条件语句的规则：
<center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_TestTru) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(test tru then t<sub>1</sub> else t<sub>2</sub>) <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> t<sub>1</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_TestFls) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(test fls then t<sub>1</sub> else t<sub>2</sub>) <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> t<sub>2</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">t<sub>1</sub> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> t<sub>1</sub>'</td>
  <td class="infrulenamecol" rowspan="3">
    (ST_Test) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">(test t<sub>1</sub> then t<sub>2</sub> else t<sub>3</sub>) <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span> (test t<sub>1</sub>' then t<sub>2</sub> else t<sub>3</sub>)</td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

 形式化的： 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;t<sub>1</sub> '<span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span>' t<sub>2</sub>" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Inductive</span> <a name="STLC.step"><span class="id" title="inductive">step</span></a> : <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span> <span class="id" title="var">t<sub>12</sub></span> <span class="id" title="var">v<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="Stlc.html#v<sub>2</sub>"><span class="id" title="variable">v<sub>2</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="Stlc.html#t<sub>12</sub>"><span class="id" title="variable">t<sub>12</sub></span></a>) <a class="idref" href="Stlc.html#v<sub>2</sub>"><span class="id" title="variable">v<sub>2</sub></span></a><a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">[</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">:=</span></a><a class="idref" href="Stlc.html#v<sub>2</sub>"><span class="id" title="variable">v<sub>2</sub></span></a><a class="idref" href="Stlc.html#64f9b642e84b9d63529f51958e7107ba"><span class="id" title="notation">]</span></a><a class="idref" href="Stlc.html#t<sub>12</sub>"><span class="id" title="variable">t<sub>12</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLC.ST_App1"><span class="id" title="constructor">ST_App1</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>1</sub>'</span> <span class="id" title="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>'"><span class="id" title="variable">t<sub>1</sub>'</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>'"><span class="id" title="variable">t<sub>1</sub>'</span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLC.ST_App2"><span class="id" title="constructor">ST_App2</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">v<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span> <span class="id" title="var">t<sub>2</sub>'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="Stlc.html#v<sub>1</sub>"><span class="id" title="variable">v<sub>1</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>'"><span class="id" title="variable">t<sub>2</sub>'</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#v<sub>1</sub>"><span class="id" title="variable">v<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#v<sub>1</sub>"><span class="id" title="variable">v<sub>1</sub></span></a>  <a class="idref" href="Stlc.html#t<sub>2</sub>'"><span class="id" title="variable">t<sub>2</sub>'</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.ST_TestTru"><span class="id" title="constructor">ST_TestTru</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a><a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLC.ST_TestFls"><span class="id" title="constructor">ST_TestFls</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a><a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLC.ST_Test"><span class="id" title="constructor">ST_Test</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>1</sub>'</span> <span class="id" title="var">t<sub>2</sub></span> <span class="id" title="var">t<sub>3</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>'"><span class="id" title="variable">t<sub>1</sub>'</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#t<sub>3</sub>"><span class="id" title="variable">t<sub>3</sub></span></a><a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span></span></a> <a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>'"><span class="id" title="variable">t<sub>1</sub>'</span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#t<sub>3</sub>"><span class="id" title="variable">t<sub>3</sub></span></a><a class="idref" href="Stlc.html#479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">)</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="479effc149d849f4aa7b4fb86bbea552"><span class="id" title="notation">&quot;</span></a>t<sub>1</sub> '<span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span>' t<sub>2</sub>" := (<a class="idref" href="Stlc.html#step"><span class="id" title="inductive">step</span></a> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span>).<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Stlc.html#step"><span class="id" title="inductive">step</span></a>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Notation</span> <a name="STLC.multistep"><span class="id" title="abbreviation">multistep</span></a> := (<a class="idref" href="Smallstep.html#multi"><span class="id" title="inductive">multi</span></a> <a class="idref" href="Stlc.html#STLC.step"><span class="id" title="inductive">step</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a name="47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation">&quot;</span></a>t<sub>1</sub> '<span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span>' t<sub>2</sub>" := (<a class="idref" href="Stlc.html#STLC.multistep"><span class="id" title="abbreviation">multistep</span></a> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>
</div>

<div class="doc">
<a name="lab214"></a><h2 class="section">例子</h2>

<div class="paragraph"> </div>

 例子：
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>) (\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>) <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> \<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>
<div class="paragraph"> </div>

</span>    即
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idBB</span> <span class="id" title="var">idB</span> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> <span class="id" title="var">idB</span>
<div class="paragraph"> </div>

</span>
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example1"><span class="id" title="lemma">step_example1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a><a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Smallstep.html#multi_refl"><span class="id" title="constructor">multi_refl</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
例子：
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>) ((\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>) (\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> \<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>
<div class="paragraph"> </div>

</span>    即
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">idBB</span> (<span class="id" title="var">idBB</span> <span class="id" title="var">idB</span>)) <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> <span class="id" title="var">idB</span>.
<div class="paragraph"> </div>

</span>
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example2"><span class="id" title="lemma">step_example2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>)<a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_App2"><span class="id" title="constructor">ST_App2</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Smallstep.html#multi_refl"><span class="id" title="constructor">multi_refl</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
例子：
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">test</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">fls</span> <span class="id" title="keyword">else</span> <span class="id" title="var">tru</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">tru</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> <span class="id" title="var">fls</span>
<div class="paragraph"> </div>

</span>    即
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">idBB</span> <span class="id" title="var">notB</span>) <span class="id" title="var">tru</span> <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> <span class="id" title="var">fls</span>.
<div class="paragraph"> </div>

</span>
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example3"><span class="id" title="lemma">step_example3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> <a class="idref" href="Stlc.html#STLC.notB"><span class="id" title="abbreviation">notB</span></a>) <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a> <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_App1"><span class="id" title="constructor">ST_App1</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_TestTru"><span class="id" title="constructor">ST_TestTru</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Smallstep.html#multi_refl"><span class="id" title="constructor">multi_refl</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
例子：
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span> → <span class="id" title="var">Bool</span>. <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. <span class="id" title="var">test</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">fls</span> <span class="id" title="keyword">else</span> <span class="id" title="var">tru</span>) <span class="id" title="var">tru</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> <span class="id" title="var">fls</span>
<div class="paragraph"> </div>

</span>    即
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idBB</span> (<span class="id" title="var">notB</span> <span class="id" title="var">tru</span>) <span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span> <span class="id" title="var">fls</span>.
<div class="paragraph"> </div>

</span>    （请注意，虽然这个项并不会通过类型检查，我们还是可以看看它是如何归约的。）

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example4"><span class="id" title="lemma">step_example4</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.notB"><span class="id" title="abbreviation">notB</span></a> <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a>) <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_App2"><span class="id" title="constructor">ST_App2</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_App2"><span class="id" title="constructor">ST_App2</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_TestTru"><span class="id" title="constructor">ST_TestTru</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Smallstep.html#multi_step"><span class="id" title="constructor">multi_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Smallstep.html#multi_refl"><span class="id" title="constructor">multi_refl</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
我们可以使用 <a href="Smallstep.html"><span class="inlineref">Smallstep</span></a> 一章中定义的 <span class="inlinecode"><span class="id" title="var">normalize</span></span> 策略来简化这些证明。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example1'"><span class="id" title="lemma">step_example1'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a> <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">normalize</span>. <span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example2'"><span class="id" title="lemma">step_example2'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>) <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">normalize</span>. <span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example3'"><span class="id" title="lemma">step_example3'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> <a class="idref" href="Stlc.html#STLC.notB"><span class="id" title="abbreviation">notB</span></a>) <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a> <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">normalize</span>. <span class="id" title="keyword">Qed</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example4'"><span class="id" title="lemma">step_example4'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.notB"><span class="id" title="abbreviation">notB</span></a> <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a>) <a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">normalize</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<a name="lab215"></a><h4 class="section">练习：2 星, standard (step_example5)</h4>
 请分别使用和不使用 <span class="inlinecode"><span class="id" title="var">normalize</span></span> 证明以下命题。 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example5"><span class="id" title="lemma">step_example5</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBBBB"><span class="id" title="abbreviation">idBBBB</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a>) <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Lemma</span> <a name="STLC.step_example5_with_normalize"><span class="id" title="lemma">step_example5_with_normalize</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#STLC.idBBBB"><span class="id" title="abbreviation">idBBBB</span></a> <a class="idref" href="Stlc.html#STLC.idBB"><span class="id" title="abbreviation">idBB</span></a>) <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Stlc.html#47f305f690b78b8c48b40746656e9f<sub>01</sub>"><span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:6%;'><span style='letter-spacing:-.2em;'>-</span><span style='letter-spacing:-.2em;'>-</span></span><span style='letter-spacing:-.2em;'>&gt;</span><span style='vertical-align:15%;'>*</span></span></span></span></a> <a class="idref" href="Stlc.html#STLC.idB"><span class="id" title="abbreviation">idB</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>


<div class="doc">
<a name="lab216"></a><h1 class="section">定型</h1>

<div class="paragraph"> </div>

 接下来我们考虑 STLC 的类型关系。 
</div>

<div class="doc">
<a name="lab217"></a><h2 class="section">上下文</h2>

<div class="paragraph"> </div>

 <i>'问'</i>：项 "<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span>" 的类型是什么？

<div class="paragraph"> </div>

    <i>'答'</i>：这取决于 <span class="inlinecode"><span class="id" title="var">x</span></span> 和 <span class="inlinecode"><span class="id" title="var">y</span></span> 的类型是什么！

<div class="paragraph"> </div>

    也就是说，为了给一个项指派类型，我们需要知道关于其中自由变量的类型的假设。

<div class="paragraph"> </div>

    这把我们引向了一个三元<i>'类型断言（type judgement）'</i>，非形式化地写做 <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">&#x22A2;</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>，
    其中 <span class="inlinecode"><span class="id" title="var">Gamma</span></span> 是一个“类型上下文（typing context）”——一个变量到他们的
    类型的映射。 
<div class="paragraph"> </div>

 使用通常偏映射的记号，我们用 <span class="inlinecode">(<span class="id" title="var">X</span></span> <span class="inlinecode"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>&#x22A2;</span><span style='font-size:90%;'>&gt;</span></span></span></span></span> <span class="inlinecode"><span class="id" title="var">T<sub>11</sub></span>,</span> <span class="inlinecode"><span class="id" title="var">Gamma</span>)</span> 来表示“更新偏函数 <span class="inlinecode"><span class="id" title="var">Gamma</span></span>
    使其也将 <span class="inlinecode"><span class="id" title="var">x</span></span> 映射到 <span class="inlinecode"><span class="id" title="var">T</span></span>”。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="STLC.context"><span class="id" title="definition">context</span></a> := <span class="id" title="definition">partial_map</span> <a class="idref" href="Stlc.html#STLC.ty"><span class="id" title="inductive">ty</span></a>.<br/>
</div>

<div class="doc">
<a name="lab218"></a><h2 class="section">类型关系</h2>

<div class="paragraph"> </div>

 <center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">Gamma x = T</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Var) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; x &#x2208; T</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">(x <span class="nowrap"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>&#x22A2;</span><span style='font-size:90%;'>&gt;</span></span></span></span></span> T<sub>11</sub> ; Gamma) &#x22A2; t<sub>12</sub> &#x2208; T<sub>12</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_Abs) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; \x:T<sub>11</sub>.t12 &#x2208; T<sub>11</sub><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span>T<sub>12</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; t<sub>1</sub> &#x2208; T<sub>11</sub><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>-</span></span>&gt;</span></span>T<sub>12</sub></td>
  <td></td>
</td>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; t<sub>2</sub> &#x2208; T<sub>11</sub></td>
  <td class="infrulenamecol" rowspan="3">
    (T_App) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; t<sub>1</sub> t<sub>2</sub> &#x2208; T<sub>12</sub></td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Tru) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; tru &#x2208; Bool</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">&nbsp;&nbsp;</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Fls) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; fls &#x2208; Bool</td>
  <td></td>
</td>
</table></center><center><table class="infrule">
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; t<sub>1</sub> &#x2208; Bool&nbsp;&nbsp;&nbsp;&nbsp;Gamma &#x22A2; t<sub>2</sub> &#x2208; T&nbsp;&nbsp;&nbsp;&nbsp;Gamma &#x22A2; t<sub>3</sub> &#x2208; T</td>
  <td class="infrulenamecol" rowspan="3">
    (T_Test) &nbsp;
  </td></tr>
<tr class="infrulemiddle">
  <td class="infrule"><hr /></td>
</tr>
<tr class="infruleassumption">
  <td class="infrule">Gamma &#x22A2; test t<sub>1</sub> then t<sub>2</sub> else t<sub>3</sub> &#x2208; T</td>
  <td></td>
</td>
</table></center>
<div class="paragraph"> </div>

    我们可以把形如 <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">&#x22A2;</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> 的三元关系读做：
    “在假设 Gamma 下，项 <span class="inlinecode"><span class="id" title="var">t</span></span> 有类型 <span class="inlinecode"><span class="id" title="var">T</span></span>。” 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;Gamma '&#x22A2;' t '&#x2208;' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Inductive</span> <a name="STLC.has_type"><span class="id" title="inductive">has_type</span></a> : <a class="idref" href="Stlc.html#STLC.context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Stlc.html#STLC.ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="STLC.T_Var"><span class="id" title="constructor">T_Var</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">x</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.T_Abs"><span class="id" title="constructor">T_Abs</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">x</span> <span class="id" title="var">T<sub>11</sub></span> <span class="id" title="var">T<sub>12</sub></span> <span class="id" title="var">t<sub>12</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation"><span class="nowrap"><span style='font-size:85%;'><span style='vertical-align:5%;'><span style='letter-spacing:-.2em;'>&#x22A2;</span><span style='font-size:90%;'>&gt;</span></span></span></span></span> <a class="idref" href="Stlc.html#T<sub>11</sub>"><span class="id" title="variable">T<sub>11</sub></span></a> <span class="id" title="notation">;</span> <a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#t<sub>12</sub>"><span class="id" title="variable">t<sub>12</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T<sub>12</sub>"><span class="id" title="variable">T<sub>12</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Stlc.html#T<sub>11</sub>"><span class="id" title="variable">T<sub>11</sub></span></a> <a class="idref" href="Stlc.html#t<sub>12</sub>"><span class="id" title="variable">t<sub>12</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#T<sub>11</sub>"><span class="id" title="variable">T<sub>11</sub></span></a> <a class="idref" href="Stlc.html#T<sub>12</sub>"><span class="id" title="variable">T<sub>12</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLC.T_App"><span class="id" title="constructor">T_App</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">T<sub>11</sub></span> <span class="id" title="var">T<sub>12</sub></span> <span class="id" title="var">Gamma</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#T<sub>11</sub>"><span class="id" title="variable">T<sub>11</sub></span></a> <a class="idref" href="Stlc.html#T<sub>12</sub>"><span class="id" title="variable">T<sub>12</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T<sub>11</sub>"><span class="id" title="variable">T<sub>11</sub></span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T<sub>12</sub>"><span class="id" title="variable">T<sub>12</sub></span></a><br/>
&nbsp;&nbsp;| <a name="STLC.T_Tru"><span class="id" title="constructor">T_Tru</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Gamma</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.tru"><span class="id" title="constructor">tru</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.T_Fls"><span class="id" title="constructor">T_Fls</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">Gamma</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.fls"><span class="id" title="constructor">fls</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;| <a name="STLC.T_Test"><span class="id" title="constructor">T_Test</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">t<sub>1</sub></span> <span class="id" title="var">t<sub>2</sub></span> <span class="id" title="var">t<sub>3</sub></span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#t<sub>3</sub>"><span class="id" title="variable">t<sub>3</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#Gamma"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.test"><span class="id" title="constructor">test</span></a> <a class="idref" href="Stlc.html#t<sub>1</sub>"><span class="id" title="variable">t<sub>1</sub></span></a> <a class="idref" href="Stlc.html#t<sub>2</sub>"><span class="id" title="variable">t<sub>2</sub></span></a> <a class="idref" href="Stlc.html#t<sub>3</sub>"><span class="id" title="variable">t<sub>3</sub></span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a name="c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&quot;</span></a>Gamma '&#x22A2;' t '&#x2208;' T" := (<a class="idref" href="Stlc.html#has_type"><span class="id" title="inductive">has_type</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>).<br/><hr class='doublespaceincode'/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="Stlc.html#has_type"><span class="id" title="inductive">has_type</span></a>.<br/>
</div>

<div class="doc">
<a name="lab219"></a><h2 class="section">例子</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_example_1"><span class="id" title="definition">typing_example_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>) <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Abs"><span class="id" title="constructor">T_Abs</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Var"><span class="id" title="constructor">T_Var</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
请注意，由于我们在提示数据库中添加了 <span class="inlinecode"><span class="id" title="var">has_type</span></span> 构造子，因此 <span class="inlinecode"><span class="id" title="tactic">auto</span></span>
    将可以直接解决这个证明。
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_example_1'"><span class="id" title="definition">typing_example_1'</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a> <a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>) <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a> <a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
更多例子：
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty</span> &#x22A2; \<span class="id" title="var">x</span>:<span class="id" title="var">A</span>. \<span class="id" title="var">y</span>:<span class="id" title="var">A</span>→<span class="id" title="var">A</span>. <span class="id" title="var">y</span> (<span class="id" title="var">y</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> → (<span class="id" title="var">A</span>→<span class="id" title="var">A</span>) → <span class="id" title="var">A</span>.
<div class="paragraph"> </div>

</span>
</div>
<div class="code">
<div class="togglescript" id="proofcontrol1" onclick="toggleDisplay('proof1');toggleDisplay('proofcontrol1')"><span class="show"></span></div>
<div class="proofscript" id="proof1" onclick="toggleDisplay('proof1');toggleDisplay('proofcontrol1')">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_example_2"><span class="id" title="definition">typing_example_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>) (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>) (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>))))<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>) <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">update_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Stlc.html#STLC.T_App"><span class="id" title="constructor">T_App</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Var"><span class="id" title="constructor">T_Var</span></a>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Stlc.html#STLC.T_App"><span class="id" title="constructor">T_App</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Var"><span class="id" title="constructor">T_Var</span></a>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Stlc.html#STLC.T_Var"><span class="id" title="constructor">T_Var</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div class="doc">
<a name="lab220"></a><h4 class="section">练习：2 星, standard, optional (typing_example_2_full)</h4>
 请在不使用 <span class="inlinecode"><span class="id" title="tactic">auto</span></span>，<span class="inlinecode"><span class="id" title="tactic">eauto</span></span>，<span class="inlinecode"><span class="id" title="tactic">eapply</span></span>（或者 <span class="inlinecode">...</span>）的情况下证明同一个命题： 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_example_2_full"><span class="id" title="definition">typing_example_2_full</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>) (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>) (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>))))<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>) <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

<a name="lab221"></a><h4 class="section">练习：2 星, standard (typing_example_3)</h4>
 请形式化地证明以下类型导出式成立： <br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty</span> &#x22A2; \<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">B</span>. \<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>→<span class="id" title="var">Bool</span>. \<span class="id" title="var">z</span>:<span class="id" title="var">Bool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> (<span class="id" title="var">x</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id" title="tactic">in</span> <span class="id" title="var">T</span>.
<div class="paragraph"> </div>

</span>
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_example_3"><span class="id" title="definition">typing_example_3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d<sub>8</sub>"><span class="id" title="notation">∃</span></a> <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d<sub>8</sub>"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> (<a class="idref" href="Stlc.html#STLC.Arrow"><span class="id" title="constructor">Arrow</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.z"><span class="id" title="definition">z</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>) (<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>) (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.z"><span class="id" title="definition">z</span></a>)))))<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="doc"> 
<div class="paragraph"> </div>

 我们也可以证明某些项<i>'不'</i>可定型。比如说，我们可以形式化地检查对于
    <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>.</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> 来说没有类型导出式为其定型——也即，
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;¬<span class="id" title="tactic">∃</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty</span> &#x22A2; \<span class="id" title="var">x</span>:<span class="id" title="var">Bool</span>. \<span class="id" title="var">y</span>:<span class="id" title="var">Bool</span>, <span class="id" title="var">x</span> <span class="id" title="var">y</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">T</span>.
<div class="paragraph"> </div>

</span>
</div>
<div class="code">
<div class="togglescript" id="proofcontrol2" onclick="toggleDisplay('proof2');toggleDisplay('proofcontrol2')"><span class="show"></span></div>
<div class="proofscript" id="proof2" onclick="toggleDisplay('proof2');toggleDisplay('proofcontrol2')">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_nonexample_1"><span class="id" title="definition">typing_nonexample_1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d<sub>8</sub>"><span class="id" title="notation">∃</span></a> <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d<sub>8</sub>"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> <a class="idref" href="Stlc.html#STLC.Bool"><span class="id" title="constructor">Bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>) (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.y"><span class="id" title="definition">y</span></a>)))<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hc</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> <span class="id" title="var">Hc</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;<span class="inlinecode"><span class="id" title="tactic">clear</span></span>&nbsp;tactic&nbsp;is&nbsp;useful&nbsp;here&nbsp;for&nbsp;tidying&nbsp;away&nbsp;bits&nbsp;of<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;context&nbsp;that&nbsp;we're&nbsp;not&nbsp;going&nbsp;to&nbsp;need&nbsp;again.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H<sub>4</sub></span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H<sub>4</sub></span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H<sub>5</sub></span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H<sub>5</sub></span> <span class="id" title="var">H<sub>4</sub></span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H<sub>2</sub></span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H<sub>2</sub></span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span> <span class="id" title="var">H<sub>1</sub></span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div class="doc">
<a name="lab222"></a><h4 class="section">练习：3 星, standard, optional (typing_nonexample_3)</h4>
 另一个例子：
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;¬(<span class="id" title="tactic">∃</span> <span class="id" title="var">S</span> <span class="id" title="var">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">empty</span> &#x22A2; \<span class="id" title="var">x</span>:<span class="id" title="var">S</span>. <span class="id" title="var">x</span> <span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">T</span>).
<div class="paragraph"> </div>

</span>
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a name="STLC.typing_nonexample_3"><span class="id" title="definition">typing_nonexample_3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d<sub>8</sub>"><span class="id" title="notation">∃</span></a> <span class="id" title="var">S</span> <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d<sub>8</sub>"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">&#x22A2;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">(</span></a><a class="idref" href="Stlc.html#STLC.abs"><span class="id" title="constructor">abs</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="Stlc.html#S"><span class="id" title="variable">S</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Stlc.html#STLC.app"><span class="id" title="constructor">app</span></a> (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>) (<a class="idref" href="Stlc.html#STLC.var"><span class="id" title="constructor">var</span></a> <a class="idref" href="Stlc.html#STLC.x"><span class="id" title="definition">x</span></a>))<a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">)</span></a> <a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">\</span></a><a class="idref" href="Stlc.html#c39634ea6bff5d764f3b26f2844b71a<sub>8</sub>"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Stlc.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/library//Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;请在此处解答&nbsp;*)</span> <span class="id" title="var">Admitted</span>.<br/>
<font size=-2>&#9744;</font>
</div>

<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Stlc.html#STLC"><span class="id" title="module">STLC</span></a>.<br/><hr class='doublespaceincode'/>
<span class="comment">(*&nbsp;2020-07-21&nbsp;18:38:23&nbsp;(UTC+00)&nbsp;*)</span><br/>
</div>
</div>

<div id="footer">
<hr/><a href="coqindex.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>